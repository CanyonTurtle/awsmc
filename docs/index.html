<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>AWSM pre-alpha prototype</title></head><body><div id="canvas-container"><div id="cartdata" data-cart="0ax}=0rr910tCVA003yb0E[FXE$8@$E/J<SE/GMX4fcCh000000rAi40%5Jd0Dn5v0Te=e0F7u70%PzvE/R&=FpE+gE/R?n3X5gy01f510sPfHwO(vaC(^%Lv@Dl%x>INewDh/pB-p(1By+BP3TWQ=x([5$y?Xib00KlEuUKy*x(W={ByeT5zEW^5z/e{7vpB4:0rr<Czf6icx(Ff9zEmEbvpK7Wx(mTb00TrLzf6icx(Ff9zEmEbvpK7WxjVf(w].D]00:xMzf6icx(Ff9zEmEbvpK7WxjVf(vQTs?00<AMzf6icx(Ff9zEmEbvpK7WxjVf(wO#2U2)>V{vpK7KvrMhZ3jH#$vpK7JwPI%iA+bjU9a-#dv@=p5By/t%B97&2yHpZ=ByeK2A=L-eBn#ZQ2ls/<0sF]d3I+wB1on#q3YUw>q?31(aQ7dOaQf4)ao(Q82oTl]06pi5ao%1&i@{rz2oT7f0u96=aoKXa7:65a1u3q}ao%L293CON%nJfA2{oG@32}9}ao%1@huBA>kM:m]2pGS+aQYy$f98[k3{<{[10F9@3)l10aR2R5apZ{=4)Zjt5fIGa5oe<9aq43K0u.R20uJx%li3@!aRL$haqn-r6D^S66Gc130ZD&Mao%p@3)uud2ql8@aR)xz@@TzXaqM7oAuMew6^at:aSiMDaSqEvar2ky8Z37*4fmNRc&$8a93ujM001e.k(-5Harz{jH>70UaS?*ic&%@6avhU3aT4%Jar+LAa%mas0T{j%ar?{My9s&*0We<jbP[yPaTOrNasp?DcM<=V9xBf2ao%p@6D[>Ec[LA1aT]XSaU1P:c<2iPFcm2Cao%p@5fSO<PAch/as[S!y-$zN2pGSZaUK@<atmEMfHk:-f^5d)f)1M]k(&b+atL5}y9tzRd<cV-aVgx1asPtK03zH{0U=!oat$!K0WfG*03KrAi4a&:FpE+CiuOLP0UuIol7!l4j0lNbj8u65ao%p@3)v+RjrM!4aWef[aWm8kau%@>kTtC{k{eAnl24MfaupMhy9t}!lM!rG001bDc&$8al)a(H00sxkk(-5$avW:XH>70UaX9TWc&%@6ni@)HaXr!Eaw3w)n*1u!0T{kBaw9+Hy9unp0WgnXoDW5KaX>r9aX%jQawV.}p-@mJp??dJaw<mIiSGd52pGSZaYpPbaYxHYax91#r3hz*r5K^^3&*Un3M]W50UuIPk(&cfaxoK+y9uU32oW8a0Ut+u3JHLB3Zy>@t7m:%aQ7dyaQf4)ao(Q82oTl%03zH?06ph>ao%1&i@]:j2oT7f0sx}OaoKXa2P%u{1u3q:ao%L24J#9z5fRu52P%B}aQPt0apifl3QB+o3)k{23}.VLk(&bsapPC6AuL?]kMTg[4[c{cao%L24J#xH5fRSd5fINbaRC[gaq5-t6cE@i6BU0Ik(-5yaqD4l3M{cb79A&n0sQa/k[CgRaqVdqBrIIA86x=saSrSDaSzKxar9]@96<PG9uVsA9Drkz0ZD/LarA@X03zI10sQa[k[CgZarIZGBrI!IaS}[IaTe3MaTmx@3QB+obP[uQbmtRsaTFlof98Lacp5g^cM<-UcV*HWasFuWBS&gR2ql8+aU2!T@@Tz{asXG:AuM>QdiHfRaUu0L0u<6reG=VpaUMaZaUU2(atv^Uf-<PwkP?^I4fdHQf98Lagc(D{gAXB}gJT=%at+h%BS&Q+2ql8+aVqT^@@TA6at$u3AuNp:h6s>[aVQV9aVZ2j3QHx=aV*/daVY#NiW3Qd2ql8^aW5a5aWd2iau<(<koJfkk6n2lao%L22Q8G1%nJfAllFMpluaeoav45py9t#hP8*97avEtvnfHC*0u<@QmJ+ivaXhV10ZE(0mgxkt2ql8^aXs%haXA>Gawc-0ocu>In{8pJao%L22Q8]d%nJfAp9rmNph}BMawr[Ny9uy@p:5WA0sIh=0u>t-qxX)Baw<pXao%p@1r*-g%nJfAruJ51rDff.li3@!aY/^jaxJLasv8#!10H!&jrN^DaZdhi@@TAGax6y!AuONfrV>G!s%d5)r1G6@5fUs42oWq!aZMo$bMFt.GAh8-E)FO/aPK!daPSX^aojq3H>70Ul4C:naP:}faP&??aoBC5JduAYk[Cgxk(-5iao-><huF$<FcndraQf4[c<2GXFcm22l7!l42P%u{2S&4!k(-5mapfB$KBR&:aQQJd0u?*[3lPZr0rLLfaQ*TpaQ]L6apHdfLZ[n!4?0)]0Hr+oble>!k{drKaoiI+yAS:40WE+i03IB!11jkfFpE+C1rW*}0STwEk(&bkao->(y9r*81rW}c0SUH^aQxg(ap6>b90ewckP*aR0VSu&l4E2SaQPs#appT.3QB!p3)k{23#)B1apQ:G0u.B(0VSu[k(&btapYI8BrIhY03I{%5HWZtFpE+C5*d/n0STwSk(&byaqk>iB%dOy5fIZ5aR)x00u&m479BAjaS9GBaShyuc<2iPFcm2laoA})93Dm!0WeKa8Z3bxaSRWzarthu9V#HD7=?S%aoA})93Dy&10F^fa0qXxaT6bKaTe3Mc<2uTFcm2uar@oo03JQN4K0bvbP[yJaTOrPasp?DcQE+kaT!DXasIjMdm0}SdJ*h?0/hwS1r/or0W[9&aUk[XaUs//at4WUe<PHYfcz>&fkqT:as!M*y9tqOf^4]a001byc&$wigc(6!gAXB}gI!i>k(-5=at>LGJduAYaVpD3c&%w(h:EJ?i3pd5icDD9at+i3y9tS7-@NtBauySbA3mtf03KGFjTZw/FpE+Cj%f[P0VSvFk(@h{au{#lBrJ}o0Wf(Mk{eHeaWWwoavx(!l)a(ujurDxaoA})93E:p3N4$ZmiC6oaXa/#aXi.Dc<2uTFcm2!aw0%.03K%279Mr[n*3=AaXT1GawuI[o*O^WaX<dOawM]1pEa$7p-@N.0/hwS1r*R+0W[9&aYpPcaYxHYax9w9r6ZQfruLl-rCAWTaw<mZy9uU3s0gp1001byc&$wisu#%hsS*/?s.Y9-aoAV?huB<b01e=mk(-6jaoAV&huBY%kM:m]0W[9!aZvqkaZDi@c<26LFcm34ay33}nfIta0u>?[uM--@aZ(H4mgxn-03L!]vKIqxFpE+Cv&$?30Vi7>k)wGzay(Qay:0ykv<2w#a.K7za.S0haztHkx=}ay0rsoTk[ChPaoAW3y9vyoy-)zaa-eusazJ$s03C]50rsoXaoAW6huBBj0XTM=a-wF8aA6sx4J>*a0tlL{aoAW8i@]:j0XTM*a-ORaaAoEz3lPy60s*n[li3@!a-!=DaAIJCBojYIBvuSsaoBg%3)x:V%nJfAB%7]IC5XWHaA{l-03zs@0sx#{li3@!a:ChPaBd@IDlvJ54fdHLf98LaDQmYi10J4mDMWYQa:(S-a:$LZaBX8HE&[!C0sQc40yu+=10Ji@aB<FnFDo:lF=OdAa+G!rF=N0D0C-<i0ymzyG-KF&FpE+CH5<NKa+{7vE&%HEBrMCvaCZ4vHxhJvI2/)Na=lpyGAiiM0DYGy0u^p3aC{hxa=DB/%nJfAJr7eQ0u^v5AuQtyli3@!a==TDG-JrS0DxoA0u^j1aDcszJSyn:0u^9$5crjZ0W[9!a=#^>0u)QbaDVWEK]YqvLk#^caD(*:0VhsC3JHM2ar=%IaoAWI0CS^y0u^TdbMFt.3&*t]k(<y-01Ybr3LJIaFpJdMbMZmik[vY@Ab^c73KlUR03.IW3J{CO0T/bhblneP03.EK1]]+CbMFhP03.EK3Mf0Cl4BGo1pCtj00930l4<=s1pCtt00000" data-cartlen="3043"></div><canvas id="screen"></canvas><div id="top"><span id="fpsOut">fps</span><a href="https://github.com/CanyonTurtle/awsmc">source</a><button type="button" id="fullscreen-btn">Fullscreen</button></div></div><style>#screen{image-rendering:pixelated}body,html{margin:0;width:100%;height:100%;background-color:#fff}#top{position:absolute;top:10px;left:10px;z-index:10;display:inline}#canvas-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center}</style><script>function B(e,t){let n=0,o=0,i=0;const r=e.length,c=t.length;if(e.length%5==0)for(;o<r;){const r=e.charCodeAt(o++)-32;if(r<0||r>=U.length)return n;if(i=85*i+U[r],o%5==0){let e=16777216;for(;e>=1;){if(n>=c)return n;t[n++]=i/e%256,e/=256}i=0}}return n}var m="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#".split(""),U=[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0];function w(){if(null==document.fullscreenElement){let e=function(){const e=window.frameElement;if(e){let t=e;t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex="99999",t.style.width="100%",t.style.height="100%"}};const t=document.body.requestFullscreen&&document.body.requestFullscreen({navigationUI:"hide"});t?t.catch(e):e()}}var u=function(e){let t=e.memory,n=new Uint8Array(t.buffer,v,h*F);n.fill(0);let o=0;for(let[t,i]of e.info.activeTouches.entries()){let[e,t,r]=i;const c=o*F;n[c+1]=e>>8&255,n[c+0]=e,n[c+3]=t>>8&255,n[c+2]=t,n[c+5]=r>>8&255,n[c+4]=r,o+=1}e.info.touch_generation+=1},d=function(e){let t=!1;function n(e,t){e.preventDefault();const n=e.changedTouches;for(let e=0;e<n.length;e++){const o=n[e];i(o.identifier,t,o.clientX,o.clientY)}}function o(e,t){e.preventDefault(),i(-1,t,e.clientX,e.clientY)}function i(t,n,o,i){if(n)return void e.info.activeTouches.delete(t);const r=document.getElementById("screen"),c=r.getBoundingClientRect(),a=r.width/c.width,l=r.height/c.height,u=Math.floor((o-c.left)*a),f=Math.floor((i-c.top)*l);u<0||u>=r.width||f<0||f>=r.height?e.info.activeTouches.delete(t):e.info.activeTouches.set(t,[u,f,e.info.touch_generation])}e.info.activeTouches=new Map,e.info.touch_generation=0;const r=e=>{n(e,!1)},c=e=>{n(e,!0)},a=e=>{t&&o(e,!1)},l=e=>{t=!0,o(e,!1)},u=e=>{t=!1,o(e,!0)},f=document.getElementById("screen"),d=(e,t)=>{f.removeEventListener(e,t),f.addEventListener(e,t,{passive:!1})};for(let[e,t]of[["touchstart",r],["touchmove",r],["touchend",c],["touchcancel",c],["mousemove",a],["mousedown",l],["mouseup",u]])d(e,t);document.getElementById("fullscreen-btn").addEventListener("click",(e=>{e.preventDefault(),w()}))};function i(e){let t=e.memory;const n=new Uint16Array(t.buffer,f,4);e.config.logical_width_px=n[0],e.config.logical_height_px=n[1];const o=new Uint8Array(t.buffer,x,e.config.logical_width_px*e.config.logical_height_px*S),i=document.getElementById("screen");if(i.width=e.config.logical_width_px,i.height=e.config.logical_height_px,!(q=i.getContext("webgl")))return void alert("WebGL not supported");const r=q.createShader(q.VERTEX_SHADER);if(q.shaderSource(r,R),q.compileShader(r),!q.getShaderParameter(r,q.COMPILE_STATUS))return void console.error("Vertex shader compilation error:",q.getShaderInfoLog(r));const c=q.createShader(q.FRAGMENT_SHADER);if(q.shaderSource(c,b),q.compileShader(c),!q.getShaderParameter(c,q.COMPILE_STATUS))return void console.error("Fragment shader compilation error:",q.getShaderInfoLog(c));const a=q.createProgram();q.attachShader(a,r),q.attachShader(a,c),q.linkProgram(a),q.useProgram(a);const l=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,l),q.bufferData(q.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,1,1,-1,-1,-1]),q.STATIC_DRAW);const u=q.getAttribLocation(a,"a_position");q.enableVertexAttribArray(u),q.vertexAttribPointer(u,2,q.FLOAT,!1,0,0);const _=q.createTexture();q.bindTexture(q.TEXTURE_2D,_),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,e.config.logical_width_px,e.config.logical_height_px,0,q.RGBA,q.UNSIGNED_BYTE,o),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,!0),q.uniform1i(q.getUniformLocation(a,"u_texture"),0);const s=q.getUniformLocation(a,"u_resolution");q.uniform2f(s,e.config.logical_width_px,e.config.logical_height_px),d(e)}function _(e){u(e);let t=e.memory,n=(O=new Date).getTime()-D.getTime();C+=(n-C)/p,D=O;const o=new Uint8Array(t.buffer,x,e.config.logical_width_px*e.config.logical_height_px*S);q.texSubImage2D(q.TEXTURE_2D,0,0,0,e.config.logical_width_px,e.config.logical_height_px,q.RGBA,q.UNSIGNED_BYTE,o),q.clearColor(0,0,0,1),q.clear(q.COLOR_BUFFER_BIT),q.drawArrays(q.TRIANGLE_STRIP,0,6)}async function g(){const e={env:{memory:new WebAssembly.Memory({initial:256})}},t=document.getElementById("cartdata"),n=t.getAttribute("data-cart"),o=Number(t.getAttribute("data-cartlen")),i=new Uint8Array(o);B(n,i);const{instance:r}=await WebAssembly.instantiate(i,e);return{memory:r.exports.memory,config:{framebuffer_addr:0,logical_width_px:64,logical_height_px:64,inputs_addr:0,max_n_players:0,info_addr:0},info:{device_width:64,device_height:64,netplay_player_number:0,activeTouches:new Map,touch_generation:0},exported_functions:{_configure:r.exports.configure,_update:r.exports.update},provided_builtins:{}}}var q,R="\n    attribute vec2 a_position;\n    void main() {\n        gl_Position = vec4(a_position, 0, 1);\n    }\n",b="\n    precision mediump float;\n    uniform sampler2D u_texture;\n    uniform vec2 u_resolution;\n    void main() {\n        vec2 uv = gl_FragCoord.xy / u_resolution;\n        gl_FragColor = texture2D(u_texture, uv);\n    }\n",p=20,C=0,D=new Date,O=new Date,S=4,x=512,f=16,v=32,h=10,F=6;async function T(){const e=await g();e.exported_functions._configure(),i(e),setInterval((()=>{e.exported_functions._update(),_(e)}),16.666666666666668);const t=document.getElementById("screen"),n=e.config.logical_width_px,o=e.config.logical_height_px;function r(){const i=t.parentNode.clientWidth,r=t.parentNode.clientHeight;e.info.device_width=i,e.info.device_height=r;const c=i/n,a=r/o;let l=Math.min(c,a);const u=Math.floor(n*l),f=Math.floor(o*l);t.style.width=u+"px",t.style.height=f+"px"}r(),window.addEventListener("resize",r);var c=document.getElementById("fpsOut");setInterval((function(){c.innerHTML=(1e3/C).toFixed(1)+" fps"}),1e3)}T()</script></body></html>