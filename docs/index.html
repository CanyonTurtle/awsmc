<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>AWSM pre-alpha prototype</title></head><body><div id="canvas-container"><div id="cartdata" data-cart="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" data-cartlen="4111"></div><canvas id="screen"></canvas><div id="top"><span id="fpsOut">fps</span>&#160;<a href="https://github.com/CanyonTurtle/awsmc">source</a>&#160;<button type="button" id="fullscreen-btn">Fullscreen</button></div></div><style>#screen{image-rendering:pixelated}body,html{margin:0;width:100%;height:100%;background-color:#fff}#top{position:absolute;top:10px;left:10px;z-index:10;display:inline}#canvas-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center}</style><script>function U(e,t){void 0===t&&(t="+/");for(var n,o=t.charCodeAt(0),i=t.charCodeAt(1),r=new Uint8Array(Math.floor(e.length/4*3)),a=0,c=0,l=new Array(4);c<e.length;){for(var f=0;f<4&&c<e.length;){if((n=e.charCodeAt(c++))>=65&&n<=90)n-=65;else if(n>=97&&n<=122)n-=71;else if(n>=48&&n<=57)n+=4;else if(n==o)n=62;else{if(n!=i)continue;n=63}l[f]=n,f+=1}if(4!=f)for(var u=f;u<4;u++)l[u]=0;r[a+0]=l[0]<<2|l[1]>>4,r[a+1]=(15&l[1])<<4|l[2]>>2,r[a+2]=(3&l[2])<<6|l[3],a+=f-1}return new Uint8Array(r.buffer,0,a)}function b(){if(null==document.fullscreenElement){let e=function(){const e=window.frameElement;if(e){let t=e;t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex="99999",t.style.width="100%",t.style.height="100%"}};const t=document.body.requestFullscreen&&document.body.requestFullscreen({navigationUI:"hide"});t?t.catch(e):e()}}var v=function(e){let t=e.memory,n=new Uint8Array(t.buffer,e.config.info_addr,p*R);n.fill(0);let o=0;for(let[t,i]of e.info.player_inputs[0].active_touches.entries()){let[e,t,r]=i;const a=o*R;n[a+1]=e>>8&255,n[a+0]=e,n[a+3]=t>>8&255,n[a+2]=t,n[a+5]=r>>8&255,n[a+4]=r,o+=1}e.info.touch_generation+=1},f=function(e){let t=!1;function n(e,t){e.preventDefault();const n=e.changedTouches;for(let e=0;e<n.length;e++){const o=n[e];i(o.identifier,t,o.clientX,o.clientY)}}function o(e,t){e.preventDefault(),i(-1,t,e.clientX,e.clientY)}function i(t,n,o,i){if(n)return void e.info.player_inputs[0].active_touches.delete(t);const r=document.getElementById("screen"),a=r.getBoundingClientRect(),c=r.width/a.width,l=r.height/a.height,f=Math.floor((o-a.left)*c),u=Math.floor((i-a.top)*l);f<0||f>=r.width||u<0||u>=r.height?e.info.player_inputs[0].active_touches.delete(t):e.info.player_inputs[0].active_touches.set(t,[f,u,e.info.touch_generation])}e.info.player_inputs[0].active_touches=new Map,e.info.touch_generation=0;const r=e=>{n(e,!1)},a=e=>{n(e,!0)},c=e=>{t&&o(e,!1)},l=e=>{t=!0,o(e,!1)},f=e=>{t=!1,o(e,!0)},u=document.getElementById("screen"),_=(e,t)=>{u.removeEventListener(e,t),u.addEventListener(e,t,{passive:!1})};for(let[e,t]of[["touchstart",r],["touchmove",r],["touchend",a],["touchcancel",a],["mousemove",c],["mousedown",l],["mouseup",f]])_(e,t);document.getElementById("fullscreen-btn").addEventListener("click",(e=>{e.preventDefault(),b()}))};function u(e,t){let n=e.memory;const o=new Uint16Array(n.buffer,t,7);e.config={framebuffer_addr:o[1]<<16&4294901760|65535&o[0],info_addr:o[3]<<16&4294901760|65535&o[2],logical_width_px:o[4],logical_height_px:o[5],max_n_players:o[6]};const i=new Uint8Array(n.buffer,e.config.framebuffer_addr,e.config.logical_width_px*e.config.logical_height_px*B),r=document.getElementById("screen");if(r.width=e.config.logical_width_px,r.height=e.config.logical_height_px,!(G=r.getContext("webgl")))return void alert("WebGL not supported");const a=G.createShader(G.VERTEX_SHADER);if(G.shaderSource(a,x),G.compileShader(a),!G.getShaderParameter(a,G.COMPILE_STATUS))return void console.error("Vertex shader compilation error:",G.getShaderInfoLog(a));const c=G.createShader(G.FRAGMENT_SHADER);if(G.shaderSource(c,k),G.compileShader(c),!G.getShaderParameter(c,G.COMPILE_STATUS))return void console.error("Fragment shader compilation error:",G.getShaderInfoLog(c));const l=G.createProgram();G.attachShader(l,a),G.attachShader(l,c),G.linkProgram(l),G.useProgram(l);const u=G.createBuffer();G.bindBuffer(G.ARRAY_BUFFER,u),G.bufferData(G.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,1,1,-1,-1,-1]),G.STATIC_DRAW);const _=G.getAttribLocation(l,"a_position");G.enableVertexAttribArray(_),G.vertexAttribPointer(_,2,G.FLOAT,!1,0,0);const d=G.createTexture();G.bindTexture(G.TEXTURE_2D,d),G.texImage2D(G.TEXTURE_2D,0,G.RGBA,e.config.logical_width_px,e.config.logical_height_px,0,G.RGBA,G.UNSIGNED_BYTE,i),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.CLAMP_TO_EDGE),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.CLAMP_TO_EDGE),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,!0),G.uniform1i(G.getUniformLocation(l,"u_texture"),0);const s=G.getUniformLocation(l,"u_resolution");G.uniform2f(s,e.config.logical_width_px,e.config.logical_height_px),f(e)}function h(e){v(e);let t=e.memory,n=(j=new Date).getTime()-Y.getTime();E+=(n-E)/S,Y=j;const o=new Uint8Array(t.buffer,e.config.framebuffer_addr,e.config.logical_width_px*e.config.logical_height_px*B);G.texSubImage2D(G.TEXTURE_2D,0,0,0,e.config.logical_width_px,e.config.logical_height_px,G.RGBA,G.UNSIGNED_BYTE,o),G.clearColor(0,0,0,1),G.clear(G.COLOR_BUFFER_BIT),G.drawArrays(G.TRIANGLE_STRIP,0,6)}async function d(){const e=document.getElementById("cartdata"),t=e.getAttribute("data-cart"),n=(Number(e.getAttribute("data-cartlen")),U(t,void 0)),{instance:o}=await WebAssembly.instantiate(n,{env:{}});return{memory:o.exports.memory,config:{framebuffer_addr:0,info_addr:0,logical_width_px:64,logical_height_px:64,max_n_players:0},info:{device_width:64,device_height:64,netplay_player_number:0,player_inputs:[{active_touches:new Map,keys_input:0}],touch_generation:0},exported_functions:{_configure:o.exports.configure,_update:o.exports.update},provided_builtins:{}}}var G,x="\n    attribute vec2 a_position;\n    void main() {\n        gl_Position = vec4(a_position, 0, 1);\n    }\n",k="\n    precision mediump float;\n    uniform sampler2D u_texture;\n    uniform vec2 u_resolution;\n    void main() {\n        vec2 uv = gl_FragCoord.xy / u_resolution;\n        gl_FragColor = texture2D(u_texture, uv);\n    }\n",S=20,E=0,Y=new Date,j=new Date,B=4,p=10,R=6;async function H(){const e=await d(),t=e.exported_functions._configure();u(e,t),setInterval((()=>{e.exported_functions._update(),h(e)}),16.666666666666668);const n=document.getElementById("screen"),o=e.config.logical_width_px,i=e.config.logical_height_px;function r(){const t=n.parentNode.clientWidth,r=n.parentNode.clientHeight;e.info.device_width=t,e.info.device_height=r;const a=t/o,c=r/i;let l=Math.min(a,c);const f=Math.floor(o*l),u=Math.floor(i*l);n.style.width=f+"px",n.style.height=u+"px"}r(),window.addEventListener("resize",r);var a=document.getElementById("fpsOut");setInterval((function(){a.innerHTML=(1e3/E).toFixed(1)+" fps"}),1e3)}H()</script></body></html>